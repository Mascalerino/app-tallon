<div class="quotes-page-container animate-fade-in">
  <app-panel
    [title]="panelTitle"
    [text]="panelText"
    [text2]="panelText2"
    [isVisible]="isPanelVisible"
    [showDifficultySelector]="true"
    (continue)="closePanel($event)"
  ></app-panel>

  <div class="quotes-game-container animate-slide-up">
    <!-- Game Header -->
    <div class="game-header">
      <div class="game-icon">
        <i class="fas fa-quote-left"></i>
      </div>
      <h1 class="game-title">Frases Míticas</h1>
      <p class="game-subtitle">¿Sabes quién dijo cada frase?</p>
      <div class="difficulty-badge" *ngIf="selectedDifficulty">
        <span class="difficulty-label">Dificultad:</span>
        <span class="difficulty-value" [class]="'difficulty-' + selectedDifficulty">
          <i class="fas" [class]="selectedDifficulty === 'facil' ? 'fa-leaf' : 'fa-fire'"></i>
          {{ selectedDifficulty === 'facil' ? 'Fácil' : 'Difícil' }}
        </span>
      </div>
    </div>

    <!-- Progress Section -->
    <div class="progress-section">
      <div class="stats-container">
        <div class="stat-item success">
          <div class="stat-icon">
            <i class="fas fa-check"></i>
          </div>
          <div class="stat-content">
            <span class="stat-number">{{ correctAnswers }}</span>
            <span class="stat-label">Aciertos</span>
          </div>
        </div>

        <div class="stat-item error">
          <div class="stat-icon">
            <i class="fas fa-times"></i>
          </div>
          <div class="stat-content">
            <span class="stat-number">{{ incorrectAnswers }}</span>
            <span class="stat-label">Fallos</span>
          </div>
        </div>

        <div class="stat-item total">
          <div class="stat-icon">
            <i class="fas fa-list"></i>
          </div>
          <div class="stat-content">
            <span class="stat-number">{{ totalQuotes }}</span>
            <span class="stat-label">Total</span>
          </div>
        </div>
      </div>

      <div class="progress-bar-container">
        <div class="progress-bar">
          <div 
            class="progress-fill" 
            [style.width.%]="getProgressPercentage()"
          ></div>
        </div>
        <span class="progress-text">
          {{ (correctAnswers + incorrectAnswers) }} de {{ totalQuotes }} frases
        </span>
      </div>
    </div>

    <!-- Quote Card -->
    <div class="quote-card" *ngIf="randomQuote" [class.animate-bounce-in]="newQuoteAnimated">
      <div class="quote-icon">
        <i class="fas fa-quote-left"></i>
      </div>
      <blockquote class="quote-text">
        "{{ randomQuote }}"
      </blockquote>
      <div class="quote-attribution">
        <i class="fas fa-user"></i>
        <span>¿Quién lo dijo?</span>
      </div>
    </div>

    <!-- No More Quotes -->
    <div class="no-quotes-message" *ngIf="!randomQuote">
      <div class="completion-icon">
        <i class="fas fa-trophy"></i>
      </div>
      <h3 class="completion-title">¡Juego Completado!</h3>
      <p class="completion-text">
        Has completado todas las frases disponibles
      </p>
      <div class="final-stats">
        <span class="final-score">
          Puntuación Final: {{ correctAnswers }}/{{ totalQuotes }}
        </span>
        <div class="final-accuracy">
          Precisión: {{ getAccuracy() }}%
        </div>
      </div>
    </div>

    <!-- Input Section -->
    <div class="input-section" *ngIf="randomQuote">
      <div class="input-container">
        <div class="input-icon">
          <i class="fas fa-keyboard"></i>
        </div>
        <input
          type="text"
          class="answer-input"
          placeholder="Escribe el nombre del personaje..."
          [(ngModel)]="userInput"
          (keydown.enter)="checkAnswer()"
          #answerInput
        />
        <button 
          class="submit-btn" 
          (click)="checkAnswer()"
          [disabled]="!userInput.trim()"
        >
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>

    <!-- Feedback Message -->
    <div class="feedback-section" *ngIf="feedbackMessage">
      <div class="feedback-message" [ngClass]="feedbackClass">
        <div class="feedback-icon">
          <i class="fas" [ngClass]="getFeedbackIcon()"></i>
        </div>
        <div class="feedback-content">
          <p class="feedback-text">{{ feedbackMessage }}</p>
          <p class="feedback-episode" *ngIf="feedbackEpisode">{{ feedbackEpisode }}</p>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button 
        class="btn btn-modern btn-primary-modern action-btn" 
        (click)="nextQuote()"
        *ngIf="randomQuote"
      >
        <i class="fas fa-forward"></i>
        Siguiente Frase
      </button>
      <button 
        class="btn btn-modern btn-secondary-modern action-btn" 
        (click)="resetGame()"
      >
        <i class="fas fa-refresh"></i>
        Reiniciar Juego
      </button>
    </div>
  </div>
</div>
